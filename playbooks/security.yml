---
- hosts: kubernetes
  remote_user: ansible
  become: yes
  vars:
    - ansible_password: 'password'
  gather_facts: no
  tasks:


   - name: Disable Root Login
     lineinfile:
           dest=/etc/ssh/sshd_config
           regexp='^PermitRootLogin'
           line="PermitRootLogin no"
           state=present
           backup=yes
     notify: restart ssh
  

   - name: selinux off
     shell: setenforce 0
     shell: sed -i --follow-symlinks 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/sysconfig/selinux
     
   - name: firewall off
     service:
        name:
         - firewalld
         - iptables
        state: stopped
        enabled: no
     ignore_errors: yes

   - name: Extra packages
     yum:
        name: 
          - bind-utils
          - nfs-utils
          - chrony
          - man
          - man-pages
          - mlocate
          - sysstat
        state: present


  handlers:
     - name: restart ssh
       service:
         name=sshd
         state=restarted
